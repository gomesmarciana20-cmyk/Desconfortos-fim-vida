htmlhtml


    
    
    
    <!-- PWA Meta Tags -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Desconfortos Fim Vida">
<link rel="manifest" href="manifest.json"> <!-- Ser√° gerado pelo JS -->
<link rel="apple-touch-icon" href="cover_image.png"> <!-- √çcone para iOS -->
<meta name="theme-color" content="#2196F3">

<style>
    /* Reset e Base */
    :root {
        --primary-color: #2196F3; /* Azul */<br/>
        --secondary-color: #4CAF50; /* Verde */<br/>
        --accent-color: #FFC107; /* Amarelo */<br/>
        --text-color: #333;<br/>
        --light-text-color: #666;<br/>
        --background-color: #f4f7f6;<br/>
        --card-background: #ffffff;<br/>
        --border-color: #e0e0e0;<br/>
        --danger-color: #f44336;<br/>
        --shadow-light: 0 2px 4px rgba(0,0,0,0.1);<br/>
        --shadow-medium: 0 4px 8px rgba(0,0,0,0.15);<br/>
        --font-family: 'Arial', sans-serif;
    }

    body {
        font-family: var(--font-family);<br/>
        margin: 0;<br/>
        padding: 0;<br/>
        background-color: var(--background-color);<br/>
        color: var(--text-color);<br/>
        line-height: 1.6;<br/>
        -webkit-font-smoothing: antialiased;<br/>
        -moz-osx-font-smoothing: grayscale;
    }

    h1, h2, h3, h4, h5, h6 {
        color: var(--primary-color);<br/>
        margin-top: 0;<br/>
        margin-bottom: 15px;
    }

    a {
        color: var(--primary-color);<br/>
        text-decoration: none;
    }

    a:hover {<br/>
        text-decoration: underline;
    }

    button {
        background-color: var(--primary-color);<br/>
        color: white;<br/>
        border: none;<br/>
        padding: 12px 20px;<br/>
        border-radius: 8px;<br/>
        cursor: pointer;<br/>
        font-size: 1em;<br/>
        transition: background-color 0.3s ease, transform 0.2s ease;<br/>
        box-shadow: var(--shadow-light);
    }

    button:hover {<br/>
        background-color: #1976D2;<br/>
        transform: translateY(-1px);
    }

    button:active {<br/>
        transform: translateY(0);<br/>
        box-shadow: none;
    }

    input[type="password"], input[type="text"], textarea {
        width: calc(100% - 24px);<br/>
        padding: 12px;<br/>
        margin-bottom: 15px;<br/>
        border: 1px solid var(--border-color);<br/>
        border-radius: 8px;<br/>
        font-size: 1em;<br/>
        box-sizing: border-box;
    }

    textarea {
        resize: vertical;<br/>
        min-height: 80px;
    }

    /* Layout Geral */
    .screen {
        display: none;<br/>
        min-height: 100vh;<br/>
        width: 100%;<br/>
        box-sizing: border-box;<br/>
        padding: 20px;<br/>
        animation: fadeIn 0.5s ease-out;
    }

    .screen.active {
        display: flex;<br/>
        flex-direction: column;<br/>
        align-items: center;<br/>
        justify-content: center;
    }

    .app-container {
        width: 100%;<br/>
        max-width: 800px;<br/>
        margin: 0 auto;<br/>
        background-color: var(--card-background);<br/>
        box-shadow: var(--shadow-medium);<br/>
        border-radius: 12px;<br/>
        overflow: hidden;<br/>
        display: flex;<br/>
        flex-direction: column;<br/>
        min-height: 100vh;
    }

    .app-section {
        display: none;<br/>
        padding: 20px;<br/>
        flex-grow: 1;<br/>
        overflow-y: auto;<br/>
        width: 100%;<br/>
        box-sizing: border-box;
    }

    .app-section.active {
        display: block;
    }

    /* Login Screen */
    #login-screen {
        background-color: var(--primary-color);<br/>
        color: white;<br/>
        text-align: center;<br/>
        padding: 40px 20px;
    }

    #login-screen img {
        max-width: 200px;<br/>
        height: auto;<br/>
        margin-bottom: 30px;<br/>
        border-radius: 10px;<br/>
        box-shadow: var(--shadow-medium);
    }

    #login-screen h1 {
        color: white;<br/>
        font-size: 2.2em;<br/>
        margin-bottom: 20px;
    }

    #login-screen p {
        font-size: 1.1em;<br/>
        margin-bottom: 30px;
    }

    #login-screen input[type="password"] {
        background-color: rgba(255, 255, 255, 0.9);<br/>
        color: var(--text-color);<br/>
        border: none;<br/>
        text-align: center;<br/>
        max-width: 300px;<br/>
        margin: 0 auto 20px auto;<br/>
        display: block;
    }

    #login-screen button {
        background-color: var(--secondary-color);<br/>
        font-size: 1.2em;<br/>
        padding: 15px 30px;
    }

    #login-screen button:hover {<br/>
        background-color: #388E3C;
    }

    /* Header */
    header {
        background-color: var(--primary-color);<br/>
        color: white;<br/>
        padding: 15px 20px;<br/>
        display: flex;<br/>
        justify-content: space-between;<br/>
        align-items: center;<br/>
        box-shadow: var(--shadow-medium);<br/>
        position: sticky;<br/>
        top: 0;<br/>
        z-index: 1000;
    }

    header h2 {
        margin: 0;<br/>
        font-size: 1.5em;<br/>
        color: white;
    }

    .menu-toggle {
        background: none;<br/>
        border: none;<br/>
        color: white;<br/>
        font-size: 1.8em;<br/>
        cursor: pointer;<br/>
        padding: 5px;<br/>
        display: block; /* Always show for simplicity in this single file */
    }

    #main-nav {
        display: none;<br/>
        flex-direction: column;<br/>
        position: absolute;<br/>
        top: 60px; /* Adjust based on header height */<br/>
        right: 0;<br/>
        background-color: var(--primary-color);<br/>
        width: 200px;<br/>
        box-shadow: var(--shadow-medium);<br/>
        border-radius: 0 0 8px 8px;<br/>
        z-index: 999;
    }

    #main-nav.active {
        display: flex;
    }

    #main-nav a {
        color: white;<br/>
        padding: 12px 20px;<br/>
        text-decoration: none;<br/>
        border-bottom: 1px solid rgba(255,255,255,0.1);<br/>
        transition: background-color 0.3s ease;
    }

    #main-nav a:last-child {<br/>
        border-bottom: none;
    }

    #main-nav a:hover {<br/>
        background-color: #1976D2;<br/>
        text-decoration: none;
    }

    /* Home Screen */
    #home-screen {
        padding-top: 30px;
    }

    .symptom-grid {
        display: grid;<br/>
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));<br/>
        gap: 15px;<br/>
        margin-bottom: 30px;
    }

    .symptom-card {
        background-color: var(--card-background);<br/>
        border-radius: 10px;<br/>
        padding: 15px;<br/>
        text-align: center;<br/>
        box-shadow: var(--shadow-light);<br/>
        cursor: pointer;<br/>
        transition: transform 0.2s ease, box-shadow 0.2s ease;<br/>
        display: flex;<br/>
        flex-direction: column;<br/>
        align-items: center;<br/>
        justify-content: center;<br/>
        min-height: 120px;
    }

    .symptom-card:hover {<br/>
        transform: translateY(-3px);<br/>
        box-shadow: var(--shadow-medium);
    }

    .symptom-card .icon {
        font-size: 2.5em;<br/>
        margin-bottom: 10px;<br/>
        color: var(--primary-color);
    }

    .symptom-card h3 {
        font-size: 1.1em;<br/>
        margin: 0;<br/>
        color: var(--text-color);
    }

    .quick-actions {
        display: grid;<br/>
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));<br/>
        gap: 15px;<br/>
        margin-top: 20px;
    }

    .quick-actions button {
        width: 100%;<br/>
        padding: 15px;<br/>
        font-size: 1.1em;<br/>
        background-color: var(--secondary-color);
    }

    .quick-actions button:hover {<br/>
        background-color: #388E3C;
    }

    /* Symptom Detail Screen */
    #symptom-detail-screen h2 {
        font-size: 1.8em;<br/>
        margin-bottom: 20px;<br/>
        text-align: center;
    }

    .symptom-info-section {
        background-color: var(--card-background);<br/>
        border-radius: 10px;<br/>
        padding: 20px;<br/>
        margin-bottom: 20px;<br/>
        box-shadow: var(--shadow-light);
    }

    .symptom-info-section h3 {
        color: var(--primary-color);<br/>
        font-size: 1.3em;<br/>
        margin-bottom: 10px;<br/>
        border-bottom: 1px solid var(--border-color);<br/>
        padding-bottom: 5px;
    }

    .symptom-info-section ul {
        list-style: disc;<br/>
        padding-left: 20px;<br/>
        margin: 0;
    }

    .symptom-info-section ol {
        list-style: decimal;<br/>
        padding-left: 20px;<br/>
        margin: 0;
    }

    .symptom-info-section li {
        margin-bottom: 5px;
    }

    /* Comfort Assessment Screen */
    #comfort-assessment-screen h2 {
        text-align: center;<br/>
        margin-bottom: 20px;
    }

    .comfort-scale {
        display: flex;<br/>
        justify-content: space-around;<br/>
        margin-bottom: 20px;<br/>
        background-color: var(--card-background);<br/>
        padding: 15px;<br/>
        border-radius: 10px;<br/>
        box-shadow: var(--shadow-light);
    }

    .comfort-scale label {
        display: flex;<br/>
        flex-direction: column;<br/>
        align-items: center;<br/>
        cursor: pointer;<br/>
        font-size: 0.9em;<br/>
        color: var(--light-text-color);
    }

    .comfort-scale input[type="radio"] {
        -webkit-appearance: none;<br/>
        -moz-appearance: none;<br/>
        appearance: none;<br/>
        width: 30px;<br/>
        height: 30px;<br/>
        border: 2px solid var(--primary-color);<br/>
        border-radius: 50%;<br/>
        margin-bottom: 5px;<br/>
        outline: none;<br/>
        transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .comfort-scale input[type="radio"]:checked {<br/>
        background-color: var(--primary-color);<br/>
        border-color: var(--primary-color);
    }

    .comfort-scale input[type="radio"]:checked + span {<br/>
        color: var(--primary-color);<br/>
        font-weight: bold;
    }

    #comfort-description {
        text-align: center;<br/>
        margin-top: 10px;<br/>
        font-style: italic;<br/>
        color: var(--light-text-color);<br/>
        min-height: 20px;
    }

    #save-assessment-btn {
        background-color: var(--secondary-color);<br/>
        width: 100%;<br/>
        margin-top: 20px;
    }

    #save-assessment-btn:hover {<br/>
        background-color: #388E3C;
    }

    /* Caregiver Orientations Screen */
    #caregiver-orientations-screen h2 {
        text-align: center;<br/>
        margin-bottom: 20px;
    }

    .orientation-section {
        background-color: var(--card-background);<br/>
        border-radius: 10px;<br/>
        padding: 20px;<br/>
        margin-bottom: 20px;<br/>
        box-shadow: var(--shadow-light);
    }

    .orientation-section h3 {
        color: var(--primary-color);<br/>
        font-size: 1.3em;<br/>
        margin-bottom: 10px;<br/>
        border-bottom: 1px solid var(--border-color);<br/>
        padding-bottom: 5px;
    }

    .orientation-section ul {
        list-style: disc;<br/>
        padding-left: 20px;<br/>
        margin: 0;
    }

    .orientation-section li {
        margin-bottom: 5px;
    }

    /* Crisis Mode Screen */
    #crisis-mode-screen {
        text-align: center;
    }

    #crisis-mode-screen h2 {
        color: var(--danger-color);<br/>
        font-size: 2em;<br/>
        margin-bottom: 30px;
    }

    .crisis-buttons {
        display: grid;<br/>
        grid-template-columns: 1fr;<br/>
        gap: 20px;
    }

    .crisis-buttons button {
        background-color: var(--danger-color);<br/>
        color: white;<br/>
        font-size: 1.5em;<br/>
        padding: 25px 20px;<br/>
        border-radius: 15px;<br/>
        box-shadow: var(--shadow-medium);
    }

    .crisis-buttons button:hover {<br/>
        background-color: #D32F2F;
    }

    /* Assessment History Screen */
    #assessment-history-screen h2 {
        text-align: center;<br/>
        margin-bottom: 20px;
    }

    #assessment-list {
        background-color: var(--card-background);<br/>
        border-radius: 10px;<br/>
        box-shadow: var(--shadow-light);<br/>
        padding: 15px;<br/>
        margin-bottom: 20px;
    }

    .assessment-item {
        border-bottom: 1px solid var(--border-color);<br/>
        padding: 10px 0;<br/>
        display: flex;<br/>
        flex-direction: column;
    }

    .assessment-item:last-child {<br/>
        border-bottom: none;
    }

    .assessment-item strong {
        color: var(--primary-color);
    }

    .assessment-item span {
        font-size: 0.9em;<br/>
        color: var(--light-text-color);
    }

    #clear-history-btn {
        background-color: var(--danger-color);<br/>
        width: 100%;
    }

    #clear-history-btn:hover {<br/>
        background-color: #D32F2F;
    }

    /* Utility Classes */
    .text-center { text-align: center; }<br/>
    .mb-20 { margin-bottom: 20px; }<br/>
    .mt-20 { margin-top: 20px; }

    /* Anima√ß√µes */
    @keyframes fadeIn {
        from { opacity: 0; }<br/>
        to { opacity: 1; }
    }

    /* Responsividade */
    @media (min-width: 768px) {
        .app-container {
            min-height: 80vh;<br/>
            margin-top: 5vh;<br/>
            margin-bottom: 5vh;
        }
        .screen.active {
            justify-content: flex-start; /* Align content to top on larger screens */
        }
        .symptom-grid {
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        }
        .quick-actions {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }
        .menu-toggle {
            display: none; /* Hide hamburger on larger screens */
        }
        #main-nav {
            display: flex;<br/>
            flex-direction: row;<br/>
            position: static;<br/>
            width: auto;<br/>
            box-shadow: none;<br/>
            border-radius: 0;<br/>
            background-color: transparent;
        }
        #main-nav a {
            border-bottom: none;<br/>
            padding: 8px 15px;
        }
        #main-nav a:hover {<br/>
            background-color: rgba(255,255,255,0.1);
        }
    }
</style>
<!-- Login Screen -->
<div id="login-screen" class="screen active">
    <img src="cover_image.png" alt="Capa do Livro: Os Desconfortos no Fim de Vida">
    <h1>Os Desconfortos no Fim de Vida</h1>
    <p>Um guia interativo para profissionais de sa√∫de, cuidadores e familiares.</p>
    <input type="password" id="password-input" placeholder="Digite a senha">
    <button id="login-button">Entrar</button>
    <p id="login-error" style="color: var(--accent-color); margin-top: 10px; display: none;">Senha incorreta. Tente novamente.</p>
</div>

<!-- Main App Container -->
<div id="app-container" class="screen">
    <header>
        <h2 id="app-title">Home</h2>
        <button class="menu-toggle" id="menu-toggle">‚ò∞</button>
        <nav id="main-nav">
            <a href="#" data-target="home-screen">üè† Home</a>
            <a href="#" data-target="comfort-assessment-screen">üòå Avalia√ß√£o de Conforto</a>
            <a href="#" data-target="caregiver-orientations-screen">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Cuidadores</a>
            <a href="#" data-target="crisis-mode-screen">üö® Modo Crise</a>
            <a href="#" data-target="assessment-history-screen">üìú Hist√≥rico</a>
            <a href="#" id="logout-button">üîí Sair</a>
        </nav>
    </header>

    <!-- Home/Dashboard Section -->
    <section id="home-screen" class="app-section active">
        <h2 class="text-center">Sintomas Comuns no Fim de Vida</h2>
        <div class="symptom-grid" id="symptom-grid">
            <!-- Sintomas ser√£o carregados aqui pelo JS -->
        </div>
        <h2 class="text-center mt-20">A√ß√µes R√°pidas</h2>
        <div class="quick-actions">
            <button data-target="comfort-assessment-screen">Avaliar Conforto</button>
            <button data-target="caregiver-orientations-screen">Orienta√ß√µes</button>
            <button data-target="crisis-mode-screen">Modo Crise</button>
            <button data-target="assessment-history-screen">Ver Hist√≥rico</button>
        </div>
    </section>

    <!-- Symptom Detail Section (din√¢mico) -->
    <section id="symptom-detail-screen" class="app-section">
        <button onclick="showScreen('home-screen')" class="mb-20">‚Üê Voltar</button>
        <h2 id="symptom-detail-title"></h2>
        <div id="symptom-detail-content">
            <!-- Conte√∫do do sintoma ser√° carregado aqui pelo JS -->
        </div>
    </section>

    <!-- Comfort Assessment Section -->
    <section id="comfort-assessment-screen" class="app-section">
        <button onclick="showScreen('home-screen')" class="mb-20">‚Üê Voltar</button>
        <h2>Avalia√ß√£o de Conforto</h2>
        <p class="text-center mb-20">Use a escala abaixo para registrar o n√≠vel de conforto do paciente.</p>

        <div class="comfort-scale">
            <label>
                <input type="radio" name="comfort-level" value="1">
                <span>1 - Muito Desconfort√°vel</span>
            </label>
            <label>
                <input type="radio" name="comfort-level" value="2">
                <span>2 - Desconfort√°vel</span>
            </label>
            <label>
                <input type="radio" name="comfort-level" value="3">
                <span>3 - Neutro</span>
            </label>
            <label>
                <input type="radio" name="comfort-level" value="4">
                <span>4 - Confort√°vel</span>
            </label>
            <label>
                <input type="radio" name="comfort-level" value="5">
                <span>5 - Muito Confort√°vel</span>
            </label>
        </div>
        <p id="comfort-description"></p>

        <textarea id="assessment-notes" placeholder="Observa√ß√µes adicionais (ex: o que foi feito, rea√ß√£o do paciente)..."></textarea>
        <button id="save-assessment-btn">Salvar Avalia√ß√£o</button>
        <p id="assessment-message" class="text-center mt-20" style="color: var(--secondary-color); display: none;"></p>
    </section>

    <!-- Caregiver Orientations Section -->
    <section id="caregiver-orientations-screen" class="app-section">
        <button onclick="showScreen('home-screen')" class="mb-20">‚Üê Voltar</button>
        <h2>Orienta√ß√µes para Cuidadores</h2>
        <div class="orientation-section">
            <h3>Dicas Gerais de Cuidado</h3>
            <ul>
                <li>Mantenha o ambiente calmo e confort√°vel.</li>
                <li>Ofere√ßa l√≠quidos em pequenas quantidades, se o paciente conseguir engolir.</li>
                <li>Mantenha a higiene pessoal e oral.</li>
                <li>Altere a posi√ß√£o do paciente regularmente para prevenir les√µes.</li>
                <li>Esteja presente e ofere√ßa apoio emocional.</li>
            </ul>
        </div>
        <div class="orientation-section">
            <h3>Frases √öteis para Comunica√ß√£o</h3>
            <ul>
                <li>"Estou aqui com voc√™."</li>
                <li>"Voc√™ est√° seguro(a)."</li>
                <li>"Eu te amo."</li>
                <li>"O que voc√™ precisa agora?"</li>
                <li>"Est√° tudo bem, descanse."</li>
            </ul>
        </div>
        <div class="orientation-section">
            <h3>Plano de Crise Simplificado</h3>
            <p>Em caso de piora s√∫bita ou desconforto intenso:</p>
            <ol>
                <li>Mantenha a calma.</li>
                <li>Verifique os sinais vitais (se souber).</li>
                <li>Administre medica√ß√£o de resgate, se prescrita.</li>
                <li>Ligue para a equipe de sa√∫de ou servi√ßo de emerg√™ncia.</li>
                <li>Mantenha o paciente confort√°vel e seguro.</li>
            </ol>
        </div>
    </section>

    <!-- Crisis Mode Section -->
    <section id="crisis-mode-screen" class="app-section">
        <button onclick="showScreen('home-screen')" class="mb-20">‚Üê Voltar</button>
        <h2>üö® Modo Crise üö®</h2>
        <p class="text-center mb-20">A√ß√µes r√°pidas em momentos de emerg√™ncia ou desconforto agudo.</p>
        <div class="crisis-buttons">
            <button onclick="alert('Ligar para a equipe de sa√∫de ou servi√ßo de emerg√™ncia agora.')">üìû Ligar para Equipe de Sa√∫de</button>
            <button onclick="alert('Verificar e administrar medica√ß√£o de resgate conforme prescri√ß√£o.')">üíä Medica√ß√£o de Resgate</button>
            <button onclick="alert('Posicionar o paciente para conforto e seguran√ßa (ex: lateral, cabeceira elevada).')">üõå Posicionar Paciente</button>
            <button onclick="alert('Manter a calma, respirar fundo e oferecer apoio emocional.')">üßò Manter a Calma</button>
        </div>
    </section>

    <!-- Assessment History Section -->
    <section id="assessment-history-screen" class="app-section">
        <button onclick="showScreen('home-screen')" class="mb-20">‚Üê Voltar</button>
        <h2>Hist√≥rico de Avalia√ß√µes</h2>
        <div id="assessment-list">
            <p class="text-center" id="no-history-message">Nenhuma avalia√ß√£o registrada ainda.</p>
            <!-- Avalia√ß√µes ser√£o carregadas aqui pelo JS -->
        </div>
        <button id="clear-history-btn">Limpar Hist√≥rico</button>
    </section>

</div>

<script defer>
    // Service Worker Registration for PWA
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js').then(registration => {
                console.log('SW registered: ', registration);
            }).catch(registrationError => {
                console.log('SW registration failed: ', registrationError);
            });
        });
    }

    // Generate manifest.json dynamically for PWA
    const manifest = {
        name: "Desconfortos Fim Vida",<br/>
        short_name: "Desconfortos",<br/>
        description: "Mini app interativo sobre os 10 desconfortos mais comuns no fim de vida.",<br/>
        start_url: "/",<br/>
        display: "standalone",<br/>
        background_color: "#f4f7f6",<br/>
        theme_color: "#2196F3",<br/>
        icons: [
            {
                src: "cover_image.png",<br/>
                sizes: "192x192",<br/>
                type: "image/png"
            },
            {
                src: "cover_image.png",<br/>
                sizes: "512x512",<br/>
                type: "image/png"
            }
        ]
    };
    const manifestBlob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
    const manifestURL = URL.createObjectURL(manifestBlob);
    document.querySelector('link[rel="manifest"]').setAttribute('href', manifestURL);

    // --- App Logic ---
    const PASSWORD = "cuidar123";
    const loginScreen = document.getElementById('login-screen');
    const appContainer = document.getElementById('app-container');
    const passwordInput = document.getElementById('password-input');
    const loginButton = document.getElementById('login-button');
    const loginError = document.getElementById('login-error');
    const menuToggle = document.getElementById('menu-toggle');
    const mainNav = document.getElementById('main-nav');
    const appTitle = document.getElementById('app-title');
    const logoutButton = document.getElementById('logout-button');

    // --- Data for Symptoms ---
    const symptomsData = [
        {
            id: 'gastroparesia',<br/>
            name: 'Gastroparesia',<br/>
            icon: 'ü§¢',<br/>
            content: {<br/>
                oque: 'A gastroparesia √© uma condi√ß√£o em que o est√¥mago leva muito tempo para esvaziar seu conte√∫do para o intestino delgado, mesmo sem haver um bloqueio f√≠sico. Isso pode causar n√°useas, v√¥mitos e sensa√ß√£o de saciedade precoce.',<br/>
                reconhecer: 'N√°useas persistentes, v√¥mitos (especialmente de alimentos n√£o digeridos horas ap√≥s a refei√ß√£o), incha√ßo abdominal, perda de apetite, saciedade precoce e dor abdominal.',<br/>
                avaliacao: 'Observar frequ√™ncia e volume de v√¥mitos, tempo entre a refei√ß√£o e o v√¥mito, presen√ßa de alimentos n√£o digeridos. Avaliar a ingest√£o alimentar e o peso.',<br/>
                naofarmacologicas: [
                    'Refei√ß√µes pequenas e frequentes (6-8 por dia).',
                    'Alimentos com baixo teor de gordura e fibra (fibras podem retardar o esvaziamento g√°strico).',
                    'Evitar bebidas gaseificadas e √°lcool.',
                    'Caminhar ap√≥s as refei√ß√µes para estimular a digest√£o.',
                    'Manter-se sentado(a) ou com a cabeceira elevada ap√≥s comer.'
                ],
                farmacologicas: [<br/>
                    'Procin√©ticos (ex: Metoclopramida, Domperidona) para acelerar o esvaziamento g√°strico.',<br/>
                    'Anti-em√©ticos (ex: Ondansetrona) para controlar n√°useas e v√¥mitos.'
                ],
                alertas: 'V√¥mitos incontrol√°veis, desidrata√ß√£o, perda de peso significativa, dor abdominal intensa. Risco de aspira√ß√£o.',<br/>
                orientacoes: 'Oferecer alimentos de f√°cil digest√£o, em pequenas por√ß√µes. Manter a boca limpa ap√≥s v√¥mitos. Observar sinais de desidrata√ß√£o (boca seca, pouca urina).'
            }
        },
        {
            id: 'sialorreia',<br/>
            name: 'Sialorreia (Excesso de Saliva)',<br/>
            icon: 'ü§§',<br/>
            content: {<br/>
                oque: 'Sialorreia √© o ac√∫mulo excessivo de saliva na boca, geralmente devido √† dificuldade de degluti√ß√£o (engolir) ou √† diminui√ß√£o da frequ√™ncia de degluti√ß√£o, e n√£o necessariamente por produ√ß√£o excessiva de saliva. Pode levar a babar e risco de aspira√ß√£o.',<br/>
                reconhecer: 'Saliva escorrendo pela boca, tosse frequente, engasgos, sons de "borbulhar" na garganta, umidade excessiva ao redor da boca, dificuldade para falar.',<br/>
                avaliacao: 'Observar a frequ√™ncia e quantidade de saliva escorrendo, a presen√ßa de tosse ou engasgos ap√≥s a degluti√ß√£o, e a capacidade do paciente de engolir l√≠quidos e alimentos.',<br/>
                naofarmacologicas: [<br/>
                    'Posicionamento: Manter a cabeceira elevada (30-45 graus) ou o paciente em posi√ß√£o lateral.',<br/>
                    'Higiene oral frequente: Limpar a boca com gaze √∫mida ou escova macia.',<br/>
                    'Estimula√ß√£o da degluti√ß√£o: Oferecer pequenos goles de √°gua ou gelo para estimular o reflexo de engolir (se seguro).',
                    'Uso de compressas ou toalhas para absorver o excesso de saliva.'
                ],
                farmacologicas: [<br/>
                    'Anticolin√©rgicos (ex: Escopolamina, Atropina sublingual) para reduzir a produ√ß√£o de saliva.',
                    'Inje√ß√µes de toxina botul√≠nica nas gl√¢ndulas salivares (em casos espec√≠ficos e com indica√ß√£o m√©dica).'
                ],
                alertas: 'Engasgos frequentes, tosse persistente, dificuldade respirat√≥ria, sinais de aspira√ß√£o (febre, piora da tosse, chiado no peito).',<br/>
                orientacoes: 'Manter a boca e a pele ao redor secas e limpas. Oferecer apoio e tranquilidade. Explicar √† fam√≠lia que √© um sintoma comum e como manej√°-lo.'
            }
        },
        {
            id: 'constipacao',<br/>
            name: 'Constipa√ß√£o',<br/>
            icon: 'üí©',<br/>
            content: {<br/>
                oque: 'Constipa√ß√£o √© a dificuldade ou infrequ√™ncia na evacua√ß√£o intestinal, caracterizada por fezes duras, secas e dif√≠ceis de passar. √â um sintoma muito comum no fim de vida, frequentemente causado por medicamentos (opioides), baixa ingest√£o de l√≠quidos e fibras, e imobilidade.',<br/>
                reconhecer: 'Menos de 3 evacua√ß√µes por semana, esfor√ßo excessivo para evacuar, fezes duras ou em bolinhas, sensa√ß√£o de evacua√ß√£o incompleta, dor abdominal, incha√ßo, n√°useas, v√¥mitos, confus√£o mental (em casos graves).',<br/>
                avaliacao: 'Perguntar sobre a frequ√™ncia das evacua√ß√µes, consist√™ncia das fezes (Escala de Bristol), presen√ßa de dor ou esfor√ßo. Palpar o abdome para verificar distens√£o ou massa fecal.',<br/>
                naofarmacologicas: [
                    'Aumentar a ingest√£o de l√≠quidos (se permitido e seguro).',
                    'Aumentar a ingest√£o de fibras (se a dieta for oral e tolerada).',
                    'Estimular a mobilidade (se poss√≠vel, mesmo que m√≠nima).',
                    'Massagem abdominal suave no sentido hor√°rio.',
                    'Estabelecer um hor√°rio regular para tentar evacuar.'
                ],
                farmacologicas: [<br/>
                    'Laxantes osm√≥ticos (ex: Lactulose, Macrogol) para amolecer as fezes.',<br/>
                    'Laxantes estimulantes (ex: Bisacodil, Sene) para estimular o movimento intestinal.',<br/>
                    'Suposit√≥rios (ex: Glicerina) ou enemas (ex: Fleet Enema) para casos de impacta√ß√£o fecal.',<br/>
                    'Agonistas de receptores opioides (ex: Metilnaltrexona) para constipa√ß√£o induzida por opioides.'
                ],
                alertas: 'Dor abdominal intensa, aus√™ncia de evacua√ß√µes por mais de 3 dias, v√¥mitos fecaloide, sinais de impacta√ß√£o fecal (diarreia por extravasamento, confus√£o mental).',<br/>
                orientacoes: 'Explicar a import√¢ncia da preven√ß√£o e manejo da constipa√ß√£o. Manter um registro das evacua√ß√µes. Oferecer privacidade e conforto durante a evacua√ß√£o.'
            }
        },
        {
            id: 'lesoes-pressao',<br/>
            name: 'Aumento de Les√µes por Press√£o',<br/>
            icon: 'ü©π',<br/>
            content: {<br/>
                oque: 'Les√µes por press√£o (√∫lceras de press√£o) s√£o danos localizados na pele e/ou tecido subjacente, geralmente sobre uma proemin√™ncia √≥ssea, resultantes de press√£o prolongada ou fric√ß√£o. No fim de vida, a fragilidade da pele, desnutri√ß√£o e imobilidade aumentam o risco.',<br/>
                reconhecer: 'Vermelhid√£o que n√£o desaparece ao toque (Est√°gio 1), bolhas ou perda parcial da pele (Est√°gio 2), ferida profunda com exposi√ß√£o de gordura (Est√°gio 3), exposi√ß√£o de m√∫sculo/osso (Est√°gio 4). Dor, calor, incha√ßo na √°rea afetada.',<br/>
                avaliacao: 'Inspecionar a pele diariamente, especialmente em proemin√™ncias √≥sseas (sacro, calcanhares, cotovelos, quadris). Avaliar o tamanho, profundidade, exsudato e odor da les√£o. Usar escalas de risco (ex: Braden).',<br/>
                naofarmacologicas: [
                    'Mudan√ßa de dec√∫bito (posi√ß√£o) a cada 2 horas (ou mais frequentemente, se tolerado).',
                    'Uso de colch√µes e almofadas de al√≠vio de press√£o (ex: colch√£o piramidal, de ar).',
                    'Manter a pele limpa e seca, hidratada, mas n√£o √∫mida.',
                    'Evitar fric√ß√£o e cisalhamento ao movimentar o paciente.',
                    'Nutri√ß√£o e hidrata√ß√£o adequadas (se poss√≠vel).'
                ],
                farmacologicas: [<br/>
                    'Curativos espec√≠ficos para cada est√°gio da les√£o (ex: hidrocoloides, alginatos, espumas).',
                    'Antiss√©pticos para limpeza da ferida (se houver infec√ß√£o).',
                    'Antibi√≥ticos sist√™micos em caso de infec√ß√£o grave.',
                    'Analg√©sicos para controle da dor associada √† les√£o.'
                ],
                alertas: 'Piora da les√£o (aumento de tamanho, profundidade), sinais de infec√ß√£o (vermelhid√£o, calor, pus, febre), dor intensa, odor f√©tido.',<br/>
                orientacoes: 'Ensinar cuidadores a inspecionar a pele e realizar mudan√ßas de posi√ß√£o. Explicar a import√¢ncia da nutri√ß√£o e hidrata√ß√£o. Oferecer apoio emocional, pois as les√µes podem ser angustiantes.'
            }
        },
        {
            id: 'piora-renal',<br/>
            name: 'Piora da Fun√ß√£o Renal',<br/>
            icon: 'üíß',<br/>
            content: {<br/>
                oque: 'A piora da fun√ß√£o renal no fim de vida √© comum e pode ser parte do processo natural de fal√™ncia de m√∫ltiplos √≥rg√£os. Os rins perdem a capacidade de filtrar res√≠duos do sangue e regular o equil√≠brio de fluidos e eletr√≥litos.',<br/>
                reconhecer: 'Diminui√ß√£o da produ√ß√£o de urina (olig√∫ria ou an√∫ria), incha√ßo (edema) nas pernas, p√©s e face, fadiga extrema, confus√£o mental, n√°useas, v√¥mitos, coceira na pele, h√°lito com odor ur√™mico.',<br/>
                avaliacao: 'Monitorar a produ√ß√£o de urina (diurese), observar a presen√ßa e localiza√ß√£o de edema. Avaliar o n√≠vel de consci√™ncia e a presen√ßa de sintomas como n√°useas e coceira. Exames laboratoriais (creatinina, ureia) podem confirmar, mas nem sempre s√£o necess√°rios no fim de vida.',<br/>
                naofarmacologicas: [
                    'Restri√ß√£o de l√≠quidos (se houver edema significativo e sobrecarga de volume).',
                    'Dieta com baixo teor de sal e pot√°ssio (se o paciente ainda se alimenta oralmente).',
                    'Higiene oral frequente para aliviar a boca seca e o h√°lito ur√™mico.',
                    'Posicionamento confort√°vel para aliviar o edema e a dispneia (se presente).'
                ],
                farmacologicas: [<br/>
                    'Diur√©ticos (ex: Furosemida) para reduzir o edema e a sobrecarga de volume.',
                    'Anti-em√©ticos para n√°useas e v√¥mitos.',
                    'Analg√©sicos para dor (com cautela, pois alguns s√£o excretados pelos rins).',
                    'Medica√ß√µes para controle de eletr√≥litos (ex: quelantes de pot√°ssio, se hipercalemia grave).'
                ],
                alertas: 'An√∫ria (aus√™ncia de urina), dispneia grave por sobrecarga de volume, confus√£o mental progressiva, convuls√µes.',<br/>
                orientacoes: 'Explicar √† fam√≠lia que a diminui√ß√£o da urina e o incha√ßo s√£o esperados. Focar no conforto e na redu√ß√£o dos sintomas. Evitar for√ßar a ingest√£o de l√≠quidos se houver edema.'
            }
        },
        {
            id: 'sangramentos',<br/>
            name: 'Sangramentos por Les√µes',<br/>
            icon: 'ü©∏',<br/>
            content: {<br/>
                oque: 'Sangramentos podem ocorrer no fim de vida devido √† fragilidade dos vasos sangu√≠neos, dist√∫rbios de coagula√ß√£o (doen√ßa hep√°tica, medica√ß√£o), tumores ou les√µes na pele e mucosas. Podem ser pequenos e persistentes ou agudos e volumosos.',<br/>
                reconhecer: 'Sangue vis√≠vel em feridas, boca, nariz, urina, fezes (melena ou hematoquezia), tosse com sangue (hemoptise), hematomas espont√¢neos, pet√©quias (pequenos pontos vermelhos na pele). Palidez, fraqueza, tontura em caso de perda sangu√≠nea significativa.',<br/>
                avaliacao: 'Identificar a origem e o volume do sangramento. Avaliar a frequ√™ncia e o impacto no paciente (dor, ansiedade, fraqueza). Monitorar sinais vitais (press√£o arterial, frequ√™ncia card√≠aca).',<br/>
                naofarmacologicas: [
                    'Compress√£o direta no local do sangramento (se externo e acess√≠vel).',
                    'Uso de compressas frias para vasoconstri√ß√£o.',
                    'Posicionamento confort√°vel e tranquilizador para o paciente.',
                    'Higiene oral suave com escova macia ou gaze para sangramentos na boca.',
                    'Evitar traumas ou fric√ß√£o na pele.'
                ],
                farmacologicas: [<br/>
                    'Agentes hemost√°ticos t√≥picos (ex: esponjas de gelatina, trombina) para sangramentos externos.',<br/>
                    'Medica√ß√µes para dist√∫rbios de coagula√ß√£o (ex: Vitamina K, transfus√µes, se indicado e alinhado aos objetivos de cuidado).',
                    'Analg√©sicos e ansiol√≠ticos para controle da dor e ansiedade associadas ao sangramento.',
                    'Transfus√µes de sangue (se indicado para al√≠vio de sintomas e alinhado aos objetivos de cuidado).'
                ],
                alertas: 'Sangramento volumoso e incontrol√°vel, sangramento interno (dor abdominal intensa, distens√£o, choque), sinais de choque (palidez extrema, sudorese fria, confus√£o, queda da press√£o arterial).',<br/>
                orientacoes: 'Explicar √† fam√≠lia a possibilidade de sangramentos e como agir. Oferecer apoio emocional e tranquilidade. Preparar materiais para conten√ß√£o de sangramento (compressas, toalhas escuras).'
            }
        },
        {
            id: 'diarreia',<br/>
            name: 'Diarreia',<br/>
            icon: 'üí¶',<br/>
            content: {<br/>
                oque: 'Diarreia √© a evacua√ß√£o frequente de fezes l√≠quidas ou amolecidas. No fim de vida, pode ser causada por infec√ß√µes, medicamentos (antibi√≥ticos, laxantes), impacta√ß√£o fecal com extravasamento, m√° absor√ß√£o ou doen√ßas intestinais.',<br/>
                reconhecer: 'Aumento da frequ√™ncia e liquidez das evacua√ß√µes, dor abdominal tipo c√≥lica, incha√ßo, n√°useas, v√¥mitos, febre (se infec√ß√£o), desidrata√ß√£o (boca seca, pouca urina, tontura).',<br/>
                avaliacao: 'Monitorar a frequ√™ncia e consist√™ncia das evacua√ß√µes, volume e caracter√≠sticas das fezes. Avaliar a presen√ßa de dor abdominal, febre e sinais de desidrata√ß√£o. Verificar uso de medicamentos que possam causar diarreia.',<br/>
                naofarmacologicas: [
                    'Hidrata√ß√£o oral com soro de reidrata√ß√£o oral (se o paciente consegue beber).',
                    'Dieta leve e de f√°cil digest√£o (ex: arroz, banana, ma√ß√£, torradas).',
                    'Evitar alimentos ricos em fibras, gordura, latic√≠nios e cafe√≠na.',
                    'Higiene perianal rigorosa para prevenir assaduras e infec√ß√µes.',
                    'Proteger a pele com cremes de barreira.'
                ],
                farmacologicas: [<br/>
                    'Agentes antidiarreicos (ex: Loperamida) para reduzir a motilidade intestinal.',
                    'Antibi√≥ticos (se infec√ß√£o bacteriana confirmada).',
                    'Probi√≥ticos para restaurar a flora intestinal (em alguns casos).',
                    'Analg√©sicos para dor abdominal.'
                ],
                alertas: 'Diarreia persistente por mais de 24-48 horas, sinais de desidrata√ß√£o grave, febre alta, sangue nas fezes, dor abdominal intensa.',<br/>
                orientacoes: 'Explicar a import√¢ncia da hidrata√ß√£o e higiene. Oferecer privacidade e conforto. Monitorar a pele para prevenir assaduras.'
            }
        },
        {
            id: 'engasgos',<br/>
            name: 'Engasgos',<br/>
            icon: ' choking',<br/>
            content: {<br/>
                oque: 'Engasgos ocorrem quando alimentos, l√≠quidos ou saliva entram nas vias a√©reas em vez de irem para o es√¥fago. No fim de vida, a fraqueza muscular, diminui√ß√£o dos reflexos de degluti√ß√£o e altera√ß√µes neurol√≥gicas aumentam o risco.',<br/>
                reconhecer: 'Tosse s√∫bita e intensa durante ou ap√≥s a alimenta√ß√£o/ingest√£o de l√≠quidos, voz molhada ou rouca ap√≥s engolir, dificuldade para respirar, cianose (colora√ß√£o azulada da pele), ansiedade, medo de comer.',<br/>
                avaliacao: 'Observar a ocorr√™ncia de tosse ou engasgos durante as refei√ß√µes. Avaliar a capacidade de degluti√ß√£o de diferentes consist√™ncias (l√≠quidos, pastosos, s√≥lidos). Verificar a presen√ßa de saliva√ß√£o excessiva ou ac√∫mulo de secre√ß√µes na boca.',<br/>
                naofarmacologicas: [<br/>
                    'Posicionamento: Manter o paciente sentado(a) ou com a cabeceira elevada a 90 graus durante e ap√≥s as refei√ß√µes.',
                    'Refei√ß√µes pequenas e lentas, com tempo adequado para cada degluti√ß√£o.',
                    'Consist√™ncia dos alimentos: Adaptar a consist√™ncia (ex: alimentos pastosos, l√≠quidos espessados).',
                    'Evitar distra√ß√µes durante as refei√ß√µes.',
                    'Higiene oral rigorosa antes e ap√≥s as refei√ß√µes.'
                ],
                farmacologicas: [<br/>
                    'N√£o h√° medica√ß√£o espec√≠fica para engasgos. O foco √© na preven√ß√£o e manejo das causas subjacentes (ex: sialorreia).',
                    'Anti-em√©ticos se n√°useas ou v√¥mitos contribu√≠rem para o risco.'
                ],
                alertas: 'Engasgos frequentes, dificuldade respirat√≥ria grave, cianose, sinais de aspira√ß√£o (febre, tosse persistente, chiado no peito).',<br/>
                orientacoes: 'Ensinar cuidadores sobre t√©cnicas seguras de alimenta√ß√£o e posicionamento. Explicar o risco de aspira√ß√£o. Oferecer apoio e tranquilidade durante as refei√ß√µes.'
            }
        },
        {
            id: 'sonolencia',<br/>
            name: 'Sonol√™ncia',<br/>
            icon: 'üò¥',<br/>
            content: {<br/>
                oque: 'Sonol√™ncia excessiva √© um sintoma comum no fim de vida, podendo ser causada pela progress√£o da doen√ßa, medicamentos (opioides, sedativos), desequil√≠brios metab√≥licos, desidrata√ß√£o ou infec√ß√µes. Pode variar de sonol√™ncia leve a coma.',<br/>
                reconhecer: 'Dificuldade em manter-se acordado(a) durante o dia, cochilos frequentes, resposta lenta a est√≠mulos, dificuldade de concentra√ß√£o, fala arrastada, confus√£o mental.',<br/>
                avaliacao: 'Observar o padr√£o de sono-vig√≠lia, a capacidade de resposta a est√≠mulos verbais e t√°teis. Avaliar o uso de medicamentos que causam sonol√™ncia. Verificar sinais de desidrata√ß√£o ou infec√ß√£o.',<br/>
                naofarmacologicas: [<br/>
                    'Ajustar o ambiente: Manter o quarto escuro e silencioso √† noite, e bem iluminado e com atividades leves durante o dia (se poss√≠vel).',
                    'Revisar o hor√°rio de administra√ß√£o de medicamentos sedativos.',
                    'Estimular a intera√ß√£o social e atividades leves durante os per√≠odos de vig√≠lia.',
                    'Higiene oral frequente para manter a boca √∫mida e limpa.'
                ],
                farmacologicas: [
                    'Revisar e ajustar doses de medicamentos sedativos (opioides, benzodiazep√≠nicos).',
                    'Estimulantes (ex: Metilfenidato) podem ser considerados em casos espec√≠ficos para melhorar a vig√≠lia e a intera√ß√£o, se alinhado aos objetivos de cuidado.',<br/>
                    'Tratar causas subjacentes (ex: infec√ß√£o, desidrata√ß√£o).'
                ],
                alertas: 'Sonol√™ncia que progride rapidamente para coma, dificuldade em despertar o paciente, respira√ß√£o irregular, convuls√µes.',<br/>
                orientacoes: 'Explicar √† fam√≠lia que a sonol√™ncia √© um processo natural no fim de vida. Ensinar a interagir com o paciente mesmo sonolento. Oferecer apoio emocional.'
            }
        },
        {
            id: 'retencao-urinaria',<br/>
            name: 'Reten√ß√£o Urin√°ria',<br/>
            icon: 'üöΩ',<br/>
            content: {<br/>
                oque: 'Reten√ß√£o urin√°ria √© a incapacidade de esvaziar completamente a bexiga. No fim de vida, pode ser causada por fraqueza muscular da bexiga, obstru√ß√£o (ex: pr√≥stata aumentada, impacta√ß√£o fecal), medicamentos (anticolin√©rgicos) ou problemas neurol√≥gicos.',<br/>
                reconhecer: 'Dificuldade ou incapacidade de urinar, sensa√ß√£o de bexiga cheia, dor ou desconforto na parte inferior do abdome, gotejamento de urina (incontin√™ncia por transbordamento), agita√ß√£o, confus√£o mental.',<br/>
                avaliacao: 'Perguntar sobre a frequ√™ncia e volume das mic√ß√µes. Palpar o abdome para verificar distens√£o da bexiga (globo vesical). Avaliar a presen√ßa de dor ou desconforto. Verificar uso de medicamentos que podem causar reten√ß√£o.',<br/>
                naofarmacologicas: [<br/>
                    'Posicionamento: Ajudar o paciente a sentar-se ou ficar em p√© para urinar (se poss√≠vel).',<br/>
                    'Estimula√ß√£o: Tentar sons de √°gua corrente, compressas quentes na regi√£o abdominal inferior.',
                    'Privacidade e conforto durante a mic√ß√£o.'
                ],
                farmacologicas: [
                    'Cateterismo vesical (sonda) de al√≠vio ou de demora para esvaziar a bexiga e aliviar o desconforto.',
                    'Alfa-bloqueadores (ex: Tansulosina) para relaxar a musculatura da pr√≥stata (se obstru√ß√£o prost√°tica).',
                    'Revisar e ajustar medicamentos que podem causar reten√ß√£o urin√°ria.'
                ],
                alertas: 'Dor intensa na bexiga, aus√™ncia de mic√ß√£o por muitas horas, agita√ß√£o ou confus√£o mental s√∫bita, febre (sinal de infec√ß√£o urin√°ria).',<br/>
                orientacoes: 'Explicar a causa da reten√ß√£o e a necessidade de interven√ß√£o (cateterismo). Oferecer apoio e tranquilidade. Manter a higiene √≠ntima rigorosa.'
            }
        }
    ];

    // --- DOM Elements ---
    const symptomGrid = document.getElementById('symptom-grid');
    const symptomDetailScreen = document.getElementById('symptom-detail-screen');
    const symptomDetailTitle = document.getElementById('symptom-detail-title');
    const symptomDetailContent = document.getElementById('symptom-detail-content');

    const comfortScaleRadios = document.querySelectorAll('input[name="comfort-level"]');
    const comfortDescription = document.getElementById('comfort-description');
    const assessmentNotes = document.getElementById('assessment-notes');
    const saveAssessmentBtn = document.getElementById('save-assessment-btn');
    const assessmentMessage = document.getElementById('assessment-message');

    const assessmentList = document.getElementById('assessment-list');
    const noHistoryMessage = document.getElementById('no-history-message');
    const clearHistoryBtn = document.getElementById('clear-history-btn');

    // --- Navigation Functions ---
    function showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        document.getElementById(screenId).classList.add('active');

        if (screenId === 'app-container') {
            document.querySelectorAll('.app-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('home-screen').classList.add('active');
            appTitle.textContent = 'Home';
        } else if (screenId !== 'login-screen') {
            document.querySelectorAll('.app-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            appTitle.textContent = document.querySelector(`#${screenId} h2`) ? document.querySelector(`#${screenId} h2`).textContent : 'App';
        }
        mainNav.classList.remove('active'); // Close menu on navigation
    }

    function showAppSection(sectionId) {
        document.querySelectorAll('.app-section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(sectionId).classList.add('active');
        appTitle.textContent = document.querySelector(`#${sectionId} h2`) ? document.querySelector(`#${sectionId} h2`).textContent : 'App';
        mainNav.classList.remove('active'); // Close menu on navigation
    }

    // --- Login Logic ---
    loginButton.addEventListener('click', () => {
        if (passwordInput.value === PASSWORD) {
            loginScreen.classList.remove('active');
            appContainer.classList.add('active');
            showAppSection('home-screen');
            localStorage.setItem('loggedIn', 'true');
        } else {
            loginError.style.display = 'block';
            passwordInput.value = '';
        }
    });

    passwordInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            loginButton.click();
        }
    });

    logoutButton.addEventListener('click', () => {
        localStorage.removeItem('loggedIn');
        showScreen('login-screen');
        passwordInput.value = '';
        loginError.style.display = 'none';
    });

    // Check login status on load
    if (localStorage.getItem('loggedIn') === 'true') {
        showScreen('app-container');
        showAppSection('home-screen');
    } else {
        showScreen('login-screen');
    }

    // --- Menu Toggle ---
    menuToggle.addEventListener('click', () => {
        mainNav.classList.toggle('active');
    });

    // --- Dynamic Symptom Grid ---
    function renderSymptomGrid() {
        symptomGrid.innerHTML = '';
        symptomsData.forEach(symptom => {
            const card = document.createElement('div');
            card.classList.add('symptom-card');
            card.dataset.symptomId = symptom.id;
            card.innerHTML = `
                <span class="icon">${symptom.icon}</span>
                <h3>${symptom.name}</h3>
            `;
            card.addEventListener('click', () => showSymptomDetail(symptom.id));
            symptomGrid.appendChild(card);
        });
    }

    // --- Show Symptom Detail ---
    function showSymptomDetail(symptomId) {
        const symptom = symptomsData.find(s => s.id === symptomId);
        if (symptom) {
            symptomDetailTitle.textContent = symptom.name;
            symptomDetailContent.innerHTML = `
                <div class="symptom-info-section">
                    <h3>O que √© e por que acontece</h3>
                    <p>${symptom.content.oque}</p>
                </div>
                <div class="symptom-info-section">
                    <h3>Como reconhecer (sinais e impacto)</h3>
                    <p>${symptom.content.reconhecer}</p>
                </div>
                <div class="symptom-info-section">
                    <h3>Avalia√ß√£o r√°pida em casa</h3>
                    <p>${symptom.content.avaliacao}</p>
                </div>
                <div class="symptom-info-section">
                    <h3>Interven√ß√µes n√£o-farmacol√≥gicas</h3>
                    <ul>${symptom.content.naofarmacologicas.map(item => `<li>${item}</li>`).join('')}</ul>
                </div>
                <div class="symptom-info-section">
                    <h3>Interven√ß√µes farmacol√≥gicas</h3>
                    <ul>${symptom.content.farmacologicas.map(item => `<li>${item}</li>`).join('')}</ul>
                </div>
                <div class="symptom-info-section">
                    <h3>Alertas e quando reavaliar</h3>
                    <p>${symptom.content.alertas}</p>
                </div>
                <div class="symptom-info-section">
                    <h3>Orienta√ß√µes para fam√≠lia/cuidador</h3>
                    <p>${symptom.content.orientacoes}</p>
                </div>
            `;
            showAppSection('symptom-detail-screen');
        }
    }

    // --- Comfort Assessment Logic ---
    const comfortDescriptions = {
        '1': 'O paciente parece estar sofrendo muito, com sinais claros de dor ou ang√∫stia intensa.',<br/>
        '2': 'O paciente demonstra desconforto significativo, pode estar inquieto ou com express√µes de dor.',<br/>
        '3': 'O paciente est√° em um estado neutro, sem sinais √≥bvios de conforto ou desconforto.',<br/>
        '4': 'O paciente parece estar relativamente confort√°vel, talvez relaxado ou em paz.',<br/>
        '5': 'O paciente est√° muito confort√°vel, tranquilo, sem sinais de dor ou ang√∫stia.'
    };

    comfortScaleRadios.forEach(radio => {
        radio.addEventListener('change', () => {
            comfortDescription.textContent = comfortDescriptions[radio.value];
        });
    });

    saveAssessmentBtn.addEventListener('click', () => {
        const selectedLevel = document.querySelector('input[name="comfort-level"]:checked');
        if (!selectedLevel) {
            assessmentMessage.textContent = 'Por favor, selecione um n√≠vel de conforto.';
            assessmentMessage.style.color = var(--danger-color);
            assessmentMessage.style.display = 'block';
            return;
        }

        const assessment = {
            date: new Date().toLocaleString('pt-BR'),<br/>
            level: selectedLevel.value,<br/>
            description: comfortDescriptions[selectedLevel.value],<br/>
            notes: assessmentNotes.value
        };

        let assessments = JSON.parse(localStorage.getItem('comfortAssessments')) || [];
        assessments.push(assessment);
        localStorage.setItem('comfortAssessments', JSON.stringify(assessments));

        assessmentMessage.textContent = 'Avalia√ß√£o salva com sucesso!';
        assessmentMessage.style.color = var(--secondary-color);
        assessmentMessage.style.display = 'block';
        
        // Clear form
        selectedLevel.checked = false;
        comfortDescription.textContent = '';
        assessmentNotes.value = '';
        
        renderAssessmentHistory(); // Update history
    });

    // --- Assessment History Logic ---
    function renderAssessmentHistory() {
        let assessments = JSON.parse(localStorage.getItem('comfortAssessments')) || [];
        assessmentList.innerHTML = '';

        if (assessments.length === 0) {
            noHistoryMessage.style.display = 'block';
            clearHistoryBtn.style.display = 'none';
        } else {
            noHistoryMessage.style.display = 'none';
            clearHistoryBtn.style.display = 'block';
            assessments.reverse().forEach(item => { // Show most recent first
                const div = document.createElement('div');
                div.classList.add('assessment-item');
                div.innerHTML = `
                    <strong>Data:</strong> ${item.date}<br><br/>
                    <strong>N√≠vel de Conforto:</strong> ${item.level} - ${item.description}<br><br/>
                    ${item.notes ? `<span><strong>Observa√ß√µes:</strong> ${item.notes}</span>` : ''}
                `;
                assessmentList.appendChild(div);
            });
        }
    }

    clearHistoryBtn.addEventListener('click', () => {
        if (confirm('Tem certeza que deseja limpar todo o hist√≥rico de avalia√ß√µes?')) {
            localStorage.removeItem('comfortAssessments');
            renderAssessmentHistory();
        }
    });

    // --- Initial Render ---
    document.addEventListener('DOMContentLoaded', () => {
        renderSymptomGrid();
        renderAssessmentHistory();

        // Attach navigation to main nav links
        document.querySelectorAll('#main-nav a[data-target]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                showAppSection(e.target.dataset.target);
            });
        });

        // Attach navigation to quick action buttons
        document.querySelectorAll('.quick-actions button[data-target]').forEach(button => {
            button.addEventListener('click', (e) => {
                showAppSection(e.target.dataset.target);
            });
        });
    });
</script>

<!-- Service Worker File (service-worker.js) - This content would typically be in a separate file, but for a single HTML file, it's embedded here for demonstration. For actual PWA, it should be a separate file. -->
<script id="service-worker-script" type="javascript/worker">
    const CACHE_NAME = 'desconfortos-v1';
    const urlsToCache = [
        '/',
        '/index.html',
        '/cover_image.png',
        // Add other assets if they were external files
    ];

    self.addEventListener('install', event => {
        event.waitUntil(
            caches.open(CACHE_NAME)
                .then(cache => {
                    console.log('Opened cache');
                    return cache.addAll(urlsToCache);
                })
        );
    });

    self.addEventListener('fetch', event => {
        event.respondWith(
            caches.match(event.request)
                .then(response => {
                    // Cache hit - return response
                    if (response) {
                        return response;
                    }
                    return fetch(event.request);
                })
        );
    });

    self.addEventListener('activate', event => {
        const cacheWhitelist = [CACHE_NAME];
        event.waitUntil(
            caches.keys().then(cacheNames => {
                return Promise.all(
                    cacheNames.map(cacheName => {
                        if (cacheWhitelist.indexOf(cacheName) === -1) {
                            return caches.delete(cacheName);
                        }
                    })
                );
            })
        );
    });

    // This part registers the embedded service worker
    if (self.document === undefined) { // Check if running in a worker context
        // This is the actual service worker code
        // The above code is for the main thread to register it
        // This is a simplified example. In a real scenario, you'd fetch the SW file.
    } else {
        // This is the main thread, we need to create a Blob for the service worker
        const swCode = document.getElementById('service-worker-script').textContent;
        const swBlob = new Blob([swCode], { type: 'application/javascript' });
        const swURL = URL.createObjectURL(swBlob);
        
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register(swURL).then(registration => {
                    console.log('SW registered from embedded script: ', registration);
                }).catch(registrationError => {
                    console.log('SW registration failed from embedded script: ', registrationError);
                });
            });
        }
    }
</script>
